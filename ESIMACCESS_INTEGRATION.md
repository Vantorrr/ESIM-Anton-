# ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å eSIM Access - –ì–û–¢–û–í–û!

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### –ù–æ–≤—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä: eSIM Access
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API (https://docs.esimaccess.com/)
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ AccessCode + SecretKey
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ –ü–æ–∫—É–ø–∫–∞ eSIM
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–∫–∞–∑–µ
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ Health check

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
EsimProviderService (–≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å)
         ‚Üì
   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:
   1. eSIM Access (–æ—Å–Ω–æ–≤–Ω–æ–π)
   2. eSIM Go (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
   3. Custom fallback (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π)
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
1. –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å–Ω–∞—á–∞–ª–∞ –∏–¥—É—Ç –Ω–∞ **eSIM Access**
2. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ **eSIM Go**
3. –ï—Å–ª–∏ –∏ —Ç–∞–º –æ—à–∏–±–∫–∞ ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ **fallback –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞**

---

## üì¶ –§–∞–π–ª—ã:

### –ù–æ–≤—ã–π —Ñ–∞–π–ª:
- `backend/src/modules/esim-provider/providers/esimaccess.provider.ts`
  - –ö–ª–∞—Å—Å `EsimAccessProvider`
  - –í—Å–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å eSIM Access API

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `backend/src/modules/esim-provider/esim-provider.service.ts`
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ eSIM Access
  - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å eSIM Go
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

- `.env.example`
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è eSIM Access

---

## üîê –î–æ—Å—Ç—É–ø—ã (–ø–æ–ª—É—á–µ–Ω—ã –æ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞):

```env
ESIM_ACCESS_CODE="63b6efa8f4784117bff891c989819a69"
ESIM_SECRET_KEY="593e0d53faf04b99adf904e26213177c"
```

**–ö–æ–Ω—Å–æ–ª—å:** https://console.esimaccess.com/  
**Email:** loanline@mail.ru  
**Password:** kDe-X3B-Uqt-QJQ  

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

### 1. –í—Å—Ç–∞–≤–∏—Ç—å –≤ `.env`:
```env
# eSIM Access (–æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä)
ESIM_ACCESS_CODE="63b6efa8f4784117bff891c989819a69"
ESIM_SECRET_KEY="593e0d53faf04b99adf904e26213177c"
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç:
```bash
pnpm dev
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health check:
```bash
curl http://localhost:3000/api/esim-provider/health
```

–û—Ç–≤–µ—Ç:
```json
{
  "esimAccess": true,   ‚úÖ eSIM Access —Ä–∞–±–æ—Ç–∞–µ—Ç!
  "primary": false,
  "fallback": null
}
```

### 4. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤:
```bash
curl http://localhost:3000/api/esim-provider/packages
```

### 5. –ö—É–ø–∏—Ç—å eSIM:
```bash
curl -X POST http://localhost:3000/api/esim-provider/purchase \
  -H "Content-Type: application/json" \
  -d '{"packageId": "US-5GB-30D", "email": "test@example.com"}'
```

---

## üìä API Endpoints:

### eSIM Access API (–±–∞–∑–æ–≤—ã–π URL):
```
https://api.esimaccess.com/api/v1
```

### –ú–µ—Ç–æ–¥—ã:
- `GET /balance` - –ë–∞–ª–∞–Ω—Å –∞–∫–∫–∞—É–Ω—Ç–∞
- `GET /packages` - –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
- `POST /orders` - –ö—É–ø–∏—Ç—å eSIM
- `GET /orders/:orderReference` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
- `GET /orders` - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤

### Headers:
```
Content-Type: application/json
AccessCode: 63b6efa8f4784117bff891c989819a69
SecretKey: 593e0d53faf04b99adf904e26213177c
```

---

## üîç –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö:

### Package (–ø–∞–∫–µ—Ç):
```typescript
{
  packageCode: "US-5GB-30D",
  title: "USA 5GB 30 Days",
  destination: "United States",
  data: "5GB",
  validity: 30,
  price: 15.99,
  currency: "USD",
  type: "data"
}
```

### Purchase Response (–æ—Ç–≤–µ—Ç –ø–æ–∫—É–ø–∫–∏):
```typescript
{
  success: true,
  iccid: "8901234567890123456",
  qrCodeUrl: "https://api.esimaccess.com/qr/...",
  smdpAddress: "smdp.esimaccess.com",
  activationCode: "LPA:1$smdp.esimaccess.com$...",
  orderReference: "ESA-12345"
}
```

---

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫:
- [ ] Health check —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ–∫—É–ø–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ eSIM (–ø–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞)
- [ ] QR-–∫–æ–¥ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- [ ] Activation code –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

---

## üìù –ß—Ç–æ –¥–∞–ª—å—à–µ:

### –ë–ª–∏–∂–∞–π—à–∏–µ —à–∞–≥–∏:
1. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
2. ‚è≥ –ñ–¥–µ–º –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –æ—Ç –∑–∞–∫–∞–∑—á–∏–∫–∞
3. ‚è≥ –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ–∫—É–ø–∫–∞ eSIM
4. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ QR-–∫–æ–¥–∞ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
5. ‚è≥ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ –≤ –ë–î)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ü–µ–Ω (—Ä–∞–∑ –≤ –¥–µ–Ω—å)
- [ ] Webhook –æ—Ç eSIM Access (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç)
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ (Redis)
- [ ] Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff

---

## üéâ –ò—Ç–æ–≥–æ:

**eSIM Access –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω!**

- ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤
- ‚úÖ –î–æ—Å—Ç—É–ø—ã –µ—Å—Ç—å
- ‚úÖ API –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ Fallback –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å eSIM Go

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å eSIM Access –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º!** üöÄ

---

**–í—Ä–µ–º—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** ~30 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é  
**–¢—Ä–µ–±—É–µ—Ç—Å—è:** –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –ø–æ–∫—É–ø–∫–∏  
